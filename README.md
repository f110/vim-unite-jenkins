vim-unite-jenkins
------------------

# 概要

unite の source としてjenkinsを扱えるようにする

# なぜ作ったか

jenkins でビルドするたびにブラウザで結果を確認するのは非常に面倒。
どうせならエディタから結果を確認できたほうが幸せになれる。

# どうやって動作しているの？

<pre>
Jenkins <=> relay server <=> vim
</pre>

このように vim と jenkins の間に中継用のサーバーを設けることで実現している。
中継サーバーで Jenkins の API を呼び出し vim script として評価できる文字列として返す。
vim script では非同期で中継サーバーへリクエストを送り返ってきた文字列を eval することでデータ構造を復元している。

# 中継サーバーについて

ほぼすべてが Perl で書かれている。

## 中継サーバーで使っているモジュール

* Net::Jenkins
* Plack
* Starlet
* Data::VimScript(自作)

# 既知の問題

* 中継サーバーが不正なバイト列を含む JSON をパースできないのでたまに死ぬ

これは不正なバイト列を含む JSON を返す Jenkins にも問題があればそのようなバイト列を含むコミットメッセージなどを書く人間も悪い

* Project 内の Job 一覧を取得する方法が非効率的

Job 数分 API を呼び出してしまう。他に効率がいい取得方法があれば置き換えたい。

# TODO

* Net::Jenkins からの脱却

Net::Jenkins は Moose に依存していて重い。
(常に起動しているサーバーなので起動時にインスタンスを作成しリクエストではそれを使いまわすようにすればそれほど気にならないかも。)

# Author

Fumihiro Ito
